# ZvonkoBot_3
ЗвонкоБот 3 - третья версия бота "ЗвонкоБот" для многократного упрощения ежедневной учебы.

# Начало работы
Чтобы запустить ЗвонкоБот, нужно сделать следующее:
   1. Скачать ZvonkoBot 3<br>
![как скачать Zb3](https://user-images.githubusercontent.com/69675212/132102290-fcf40e02-0cb3-4f00-804d-35e38cd76382.png)
   2. Распаковать содержимое архива в любое удобное место
   3. Установить Python 3.9+:
      1. Перейти на python.org
      2. Выбрать меню "Downloads"
      3. Загрузить новейшую версию
      4. Запустить установочный файл и пройти процесс установки
   4. Запустить файл <i>install_libs.bin</i>
   5. В папке files находится файл vk_settings.py. Необходимо перейти в него и заполнить данные о ключе API и ID группы. Для более подробных инструкций, перейдите в раздел <i>"Документация"</i>.
   6. Запустить файл run.py
   
* ЗвонкоБот будет работать правильно, если загрузить стабильную версию релиза ZvonkoBot 3 и Python версии >3.9

# Документация
## Заполнение vk_settings.py
### Переменная token
В эту переменную необходимо записать значение ключа API ВКонтакте, который можно получить следующим путем:
1. В сообществе, где вы являетесь администратором, перейдите во вкладку <i>"Управление"</i>
2. Перейдите в раздел <i>"Работа с API"</i>
3. Зайдите в раздел <i>"Long Poll API"</i>
4. Включите Long Poll API
5. Выберите версию API 5.122 или новее
6. Зайдите во вкладку <i>"Типы событий"</i>
7. Поставьте галочку напротив <i>"Входящее сообщение"</i>
8. Перейдите в раздел <i>"Ключи доступа"</i>
9. Нажмите на кнопку <i>"Создать ключ"</i>
10. Выберите пункты <i>"Разрешить приложению доступ к управлению сообществом"</i> и <i>"Разрешить приложению доступ к сообщениям сообщества"</i>
11. Нажмите кнопку <i>"Создать"</i>
12. Скопируйте ключ и вставьте его в переменную token. Она будет выглядеть примерно так:

```
token = "ваш ключ"
```
### Переменная group_id
В эту переменную необходимо щаписать значение группы ВКонтакте, в которой будет запущен бот. Для этого воспользуйтесь сторонними сайтами, или найдите инструкцию, как узнать ID группы ВКонтакте. Вы получите число, например -1234567890. Скопируйте и вставьте это число в значение переменной group_id.
## Сообщения
### Текстовые сообщения
Для того, чтобы отправить базовое сообщение, необходимо использовать метод класса <i>ZvonkoBot</i>
```
ZvonkoBot.msg_send(uid, msg, keyboard)
```
Этот метод можно использовать в любом файле следующим образом:
```
import core  # подключение файла, в котором находится класс ZvonkoBot
...
bot = core.ZvonkoBot()  # создание объекта bot класса ZvonkoBot (название может быть другим)
bot.msg_send(12345678, "Привет!")  # отправка сообщения "Привет!" пользователю с ID 12345678
```
* Сообщение не получится отправить, если:
  * Пользователь с ID параметром UID (ID получателя) никогда не отправлял сообщений боту
  * Пользователь заблокировал бота
  * Доступ к сообщениям ограничен ключом доступа API ВКонтакте
  * Параметр msg (сообщение) пустой
* Важно понимать, что параметр keyboard (клавиатура) не обязателен

### Сообщения с клавиатурой
Сообщения с клавиатурой отличаются только тем, что к текстовому сообщению будет прикреплена клавиатура. (см. блок <i>Клавиатуры</i>)<br>
Для того, чтобы прикрепить клавиатуру к текстовому сообщению, необходимо указать параметр keyboard (клавиатура) в методе, где отправляется текстовое сообщение
```
ZvonkoBot.msg_send(uid, msg, keyboard)
```
На примере из прошлого блока, например:
```
import core  # подключение файла, в котором находится класс ZvonkoBot
...
bot = core.ZvonkoBot()  # создание объекта bot класса ZvonkoBot (название может быть другим)
bot.msg_send(12345678, "Привет!", "Моя первая клавиатура")  # отправка сообщения "Привет!" пользователю с ID 12345678 и клавиатурой с ID "Моя первая клавиатура" (см. блок "Создание клавиатуры")
```
К текстовому сообщению "Привет!" мы добавляем клавиатуру с ID "Моя первая клавиатура", которую создали в блоке <i>"Создание клавиатуры"</i>.
* Если параметр keyboard (клавиатура) не задан, или такой клавиатуры не существует, клавиатура не будет добавлена к сообщению.
## Клавиатуры
### Структура клавиатуры
ZvonkoBot 3 предлагает свой собственный класс клавиатур.<br>
В Zb3 у каждой клавиатуры есть:
1. ID - необходим, чтобы отправить клавиатуру пользователю
2. Кнопки - хранится вся информация о кнопках клавиатуры
<br>У кнопок есть свои свойства: 
   1. Текст - отвечает за то, что будет написано на кнопке
   2. Цвет - отвечает за то, какой будет цвет у кнопки

* Максимальный размер клавиатуры - 5 кнопок (колонн) x 10 рядов

В ZvonkoBot 3 работа с клавиатурами представлена в виде рядов. После создания клавиатуры необходимо добавить один или несколько рядов. После этого можно добавлять кнопки на эти ряды.<br>
<br>Пример клавиатуры<br>![пример клавиатуры](https://user-images.githubusercontent.com/69675212/132103155-9d1a956b-32d9-4f96-8588-6373fa7adb06.png)

### Создание клавиатуры
ZvonkoBot 3 упрощает создание клавиатур по сравнению с прошлыми версиями.<br>
Для того, чтобы создать клавиатуру, необходимо перейти в файл <i>keyboards.py</i>.<br>
В самом низу файла, под комментарием <i>"создание клавиатур"</i> можно создавать свои клавиатуры. Для этого, необходимо использовать следующий синтаксис: <br>
```
_ = Keyboard("Моя первая клавиатура")
```
В этом примере создается переменная _ (вы можете назвать её как угодно), и к ней создается клавиатура с ID "Моя первая клавиатура".
После этого остается добавить ряды, кнопки, и завершить создание клавиатуры.

### Добавление рядов
Для того, чтобы добавить ряд в клавиатуру Zb3 необходимо использовать функцию
```
Keyboard.add_rows(rows_amount)
```
Эта функция принадлежит классу <i>Keyboard</i> и имеет параметр <i>rows_amount</i> или количество рядов. Этот параметр должен равняться натуральному числу, например 4.
<br>Рассмотрим добавление рядов на примере из прошлого блока "Создание клавиатуры":
```
_.add_rows(3)  # добавление трёх рядов в клавиатуру "_"
```
Эта строчка создаст 3 ряда в клавиатуре. Если же достаточно только одного ряда, параметр количество рядов можно не указывать. Тогда в клавиатуру добавится только один ряд
```
_.add_rows()  # добавление одного ряда в клавиатуру "_"
```
* Если параметр отрицательный, применится модуль.<br>
* Если параметр больше 10 (макс. кол-во рядов, см. <i>"Структура клавиатуры"</i>), параметр будет приравнен 10.<br>
* Если параметр равен нулю, параметр будет приравнен к 1.

### Добавление кнопок
В ZvonkoBot 3 у кнопок есть текст и цвет как обязательные параметры.<br>
Список цветов Zb3:
* WHITE
* BLUE
* GREEN
* RED

Чтобы добавить кнопку нужно воспользоваться функцией класса <i>Keyboard</i>
```
Keyboard.add_button(text, color, row)
```
На примере из блока <i>Создание клавиатуры</i>, добавление синей кнопки с надписью "Синяя кнопка" во 2й ряд  выглядит так:
```
_.add_button("Синяя кнопка", BLUE, 2)  # добавление синей кнопки "Синяя кнопка" во второй ряд 
```

* Важно понимать, что ряды в ZvonkoBot 3 начинаются с 1, а не с 0.
* Если параметр ряда не задан, кнопка добавится в первый ряд.
* Если ряд из параметра не существует, кнопка будет добавлена в первый ряд.
* Если рядов не существует, новый ряд будет создан.

### Завершение создания клавиатуры
Чтобы завершить создание клавиатуры, необходимо использовать функцию класса <i>Keyboard</i>
```
Keyboard.bake()
```
При использовании этого метода, все ряды и кнопки преобразуются в стандарт ВКонтакте и добавятся в список клавиатур, чтобы потом их можно было получить с помощью ID.<br>
Так выглядит эта процедура на примере из предыдущих блоков:
```
_.bake()  # завершение создания клавиатуры "_"
```
* В этот метод не надо добавлять параметр.